# Address vim mode switching delay
set -s escape-time 0

# Increase scrollback buffer size from 2000 to 50000 lines
set -g history-limit 999999

# Refresh 'status-left' and 'status-right' more often, from every 15s to 5s
set -g status-interval 5

#setw -g mouse on
#set-option -g mouse on
set -g mouse on

# sane scrolling:
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

set -g status-keys emacs

set -g default-terminal "screen-256color"

set-window-option -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

set -g focus-events on

setw -g aggressive-resize on

# Easier and faster switching between next/prev window
bind C-p previous-window
bind C-n next-window

# If prefix is 'C-a'
unbind C-b
set -g prefix M-Space
bind-key -n C-Space resize-pane -Z
bind C-b send-prefix
bind a last-window

# List of plugins
set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'erikw/tmux-powerline'


set -g @resurrect-strategy-vim 'session'
set -g @resurrect-resurrect-save-shell-history 'full'

# copy (works with > 2.5 tmux)
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

bind-key Y run-shell '
    FILE="${HOME}/tmux_capture_$(date +%Y%m%d_%H%M%S).txt";
    tmux capture-pane -J -S -;
    tmux save-buffer $FILE;
    tmux display-message "Pane saved to $FILE"
'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
